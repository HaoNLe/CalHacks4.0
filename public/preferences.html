<!DOCTYPE html>
<html>
<head>
<title>Home</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="assets/preference+suggestion.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script src="assets/js/image-picker.js" type="text/javascript"></script>
	<script type='text/javascript'>
		$(window).load(function(){
		jQuery("select").imagepicker({
		  hide_select:  true,
		    });
		$('.submit').click(function(){ 
			// HARD-CODED TO TEST 
			
			// ------------

			// console.log($('.image-picker').data('picker').selected_values().length);
			// console.log($('.image-picker').data('picker').selected_values());

			// --------------

			// var endpoint = "some.php";
			// var selected = $('.image-picker').data('picker').selected_values();
			// $.ajax({
			// 	method: "POST",
			// 	url: endpoint,
			// 	data: { kittens: selected }
			// }).done(function( result ) {
			// 	  console.log( "Data Received: " + result );
			// 	  $('.picker').empty();
			// 		$(".picker").append("<select class='image-picker show-html' multiple='multiple'>");
			// 		$.each(result, function(i, obj) {
   //                      if(obj.image != null)
   //                      {
   //                          var imgSrc = obj.image;
   //                      } else {
   //                          imgSrc = '';
   //                      }
   //                      $('select.image-picker').append($("<option data-img-src='" + imgSrc + "'></option>").attr("value", obj.code));
   //                  });
   //                  $(".picker").append("</select>");
   // 					$(".picker").trigger("refresh");
			// 	});
			// MAKE SURE TO CHECK THAT THE <option> TAG IS BEING APPENDED TO THE RIGHT CLASS.
			$('.selected').each(function(){ this.click() });
		});
		$('.clear').click(function(){ 
			$('.selected').each(function(){ this.click() });
		});

		let values = [];
		$("#submit").click(function(){
			for (let i = 1; i < 10; i++) {
				let id = i.toString();
				let item = document.getElementById(id);
				console.log(id);
				if (item.classList.contains("selected")){
					values.push($(id).val());
				}
			}
			console.log("HELLOOO");
			$.post("http://localhost:8080/teach", {values: values}, function(data){});
			document.location.href = ('/recommend');			
		});

		$("#submitMore").click(function(){
			for (let i = 1; i < 10; i++) {
				let id = i.toString();
				let item = document.getElementById(id);
				console.log(id);				
				if (item.classList.contains("selected")){
					values.push($(id).val());
				}
			}
			//console.log("HELLOOO");			
			//$.post("http://localhost:8080/teach", {values: values}, function(data){});
			//document.location.href = ('/teach');			
			$(".picker").empty();
			$(".picker").append("<select class='image-picker show-html' multiple='multiple'> \
				<option class='img-fit' data-img-src='assets/images/baby_back_ribs/3.jpg' value='puppy'>a</option> \
				<option class='img-fit' data-img-src='assets/images/fish_and_chips/934084.jpg' value='puppy2'>b</option> \
				<option class='img-fit' data-img-src='assets/images/ice_cream/81939.jpg' value='puppy3'>Puppy</c>\
				<option class='img-fit' data-img-src='assets/images/french_fries/71701.jpg' value='1'>d</option> \
				<option class='img-fit' data-img-src='assets/images/chicken_quesadilla/10257.jpg' value='e'>e</option> \
				<option class='img-fit' data-img-src='assets/images/clam_chowder/3241182.jpg' value='2'>f</option> \
				<option class='img-fit' data-img-src='assets/images/pho/472628.jpg' value='3'>g</option> \
				<option class='img-fit' data-img-src='assets/images/macaroni_and_cheese/379982.jpg' value='4'>h</option> \
				<option class='img-fit' data-img-src='assets/images/sushi/477126.jpg' value='5'>i</option></select>");
			$(".picker").trigger("refresh");
		});	
	
	});
		$(document).on('refresh', '.picker', function() {
    		$("select").imagepicker({
        		hide_select: true,
			    });
			});
		
			
	</script>
</head>

<body>
	<div class="container">
	<div class="row top"><div class="title">Tell us about your <em>preferences! </em> Select the food you like from below:</div>
		<span class="right"><button class="clear">Uncheck Selected</button></span>
		</div>
	   <div class="picker">
<!-- 	   	<div class="row">
			<div class="col-xs-12 col-sm-4 col-md-4 green"></div>
		</div> -->
			<select class="image-picker show-html" multiple="multiple">
				<option class="img-fit" id="1" data-img-src="assets/images/fried_rice/3542359.jpg" value="18"></option>
				<option class="img-fit" id="2" data-img-src="assets/images/cheese_cake/522074.jpg" value="cat2"></option>
				<option class="img-fit" id="3" data-img-src="assets/images/pizza/1029698.jpg" value="cat3"></option>
				<option class="img-fit" id="4" data-img-src="assets/images/bibimbap/1186072.jpg" value="cat4"></option>
				<option class="img-fit" id="5" data-img-src="assets/images/eggs_benedict/2427571.jpg" value="cat5"></option>
				<option class="img-fit" id="6" data-img-src="assets/images/onion_rings/2012870.jpg" value="cat6"></option>
				<option class="img-fit" id="7" data-img-src="assets/images/guacamole/959238.jpg" value="cat7"></option>
				<option class="img-fit" id="8" data-img-src="assets/images/pad_thai/1167.jpg" value="cat8"></option>
				<option class="img-fit" id="9" data-img-src="assets/images/samosa/1366299.jpg" value="cat9"></option>
			</select>
			
		</div>
		<div class="row" id="footer">
			<div class="right-btn"><button id="submit" class="submit done btn-info">I'm done for now</button>
			<button id="submitMore" class="submit btn-primary">Pick More Favorite Foods!</button></div>
		</div>
	</div>
</body>

</html>

