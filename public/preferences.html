<!DOCTYPE html>
<html>
<head>
<title>Home</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="assets/preference+suggestion.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script src="assets/js/image-picker.js" type="text/javascript"></script>
	<script type='text/javascript'>
		$(window).load(function(){
		jQuery("select").imagepicker({
		  hide_select:  true,
		    });
		$('.submit').click(function(){ 
			// HARD-CODED TO TEST 
			//$(".picker").empty();
			//$(".picker").append("<select class='image-picker show-html' multiple='multiple'><option data-img-src='assets/img/puppy.jpeg' value='puppy'>Puppy</option><option data-img-src='https://pbs.twimg.com/profile_images/610457543857442817/wUcMHzJG_400x400.jpg' value='puppy2'>Puppy2</option><option data-img-src='https://i.ytimg.com/vi/SfLV8hD7zX4/maxresdefault.jpg' value='puppy3'>Puppy</option></select>");
			//$(".picker").trigger("refresh");
			// ------------

			// console.log($('.image-picker').data('picker').selected_values().length);
			// console.log($('.image-picker').data('picker').selected_values());

			// --------------

			// var endpoint = "some.php";
			// var selected = $('.image-picker').data('picker').selected_values();
			// $.ajax({
			// 	method: "POST",
			// 	url: endpoint,
			// 	data: { kittens: selected }
			// }).done(function( result ) {
			// 	  console.log( "Data Received: " + result );
			// 	  $('.picker').empty();
			// 		$(".picker").append("<select class='image-picker show-html' multiple='multiple'>");
			// 		$.each(result, function(i, obj) {
   //                      if(obj.image != null)
   //                      {
   //                          var imgSrc = obj.image;
   //                      } else {
   //                          imgSrc = '';
   //                      }
   //                      $('select.image-picker').append($("<option data-img-src='" + imgSrc + "'></option>").attr("value", obj.code));
   //                  });
   //                  $(".picker").append("</select>");
   // 					$(".picker").trigger("refresh");
			// 	});
			// MAKE SURE TO CHECK THAT THE <option> TAG IS BEING APPENDED TO THE RIGHT CLASS.
			$('.selected').each(function(){ this.click() });
		});
		$('.clear').click(function(){ 
			$('.selected').each(function(){ this.click() });
		});

		let values = [];
		$("#submit").click(function(){
			for (let i = 1; i < 10; i++) {
				let id = i.toString();
				let item = document.getElementById(id);
				console.log(id);
				if (item.classList.contains("selected")){
					values.push($(id).val());
				}
			}
			console.log("HELLOOO");
			$.post("http://localhost:8080/teach", {values: values}, function(data){});
			document.location.href = ('/recommend');			
		});

		$("#submitMore").click(function(){
			for (let i = 1; i < 10; i++) {
				let id = i.toString();
				let item = document.getElementById(id);
				console.log(id);				
				if (item.classList.contains("selected")){
					values.push($(id).val());
				}
			}
			console.log("HELLOOO");			
			$.post("http://localhost:8080/teach", {values: values}, function(data){});
			document.location.href = ('/teach');			
		});	
	
	});
		$(document).on('refresh', '.picker', function() {
    		$("select").imagepicker({
        		hide_select: true,
			    });
			});
		
			
	</script>
</head>

<body>
	<div class="container">
	<div class="row top"><div class="title">Tell us about your <em>preferences! </em> Select the food you like from below:</div>
		<span class="right"><button class="clear">Uncheck Selected</button></span>
		</div>
	   <div class="picker">
<!-- 	   	<div class="row">
			<div class="col-xs-12 col-sm-4 col-md-4 green"></div>
		</div> -->
			<select class="image-picker show-html" multiple="multiple">
				<option id="1" data-img-src="assets/img/kitten1.jpeg" value="cat1"></option>
				<option id="2" data-img-src="assets/img/kitten1.jpeg" value="cat2"></option>
				<option id="3" data-img-src="http://placekitten.com/150/200" value="cat3"></option>
				<option id="4" data-img-src="assets/img/kitten1.jpeg" value="cat4"></option>
				<option id="5" data-img-src="assets/img/kitten1.jpeg" value="cat5"></option>
				<option id="6" data-img-src="http://placekitten.com/150/200" value="cat6"></option>
				<option id="7" data-img-src="assets/img/kitten1.jpeg" value="cat7"></option>
				<option id="8" data-img-src="assets/img/kitten1.jpeg" value="cat8"></option>
				<option id="9" data-img-src="http://placekitten.com/150/200" value="cat9"></option>
			</select>
			
		</div>
		<div class="row" id="footer">
			<div class="right-btn"><button id="submit" class="submit done btn-info">I'm done for now</button>
			<button id="submitMore" class="submit btn-primary">Pick More Favorite Foods!</button></div>
		</div>
	</div>
</body>

</html>

